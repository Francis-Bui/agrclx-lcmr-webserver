import{a0 as O,c as b,r as k,a as G,o as F,P as J,R as I,a1 as R,U as w,x as n,W as u,Z as h,a2 as M,a3 as A,Y as E,a4 as C,a5 as _}from"./index-CI3ZEO8d.js";import{V,a as L}from"./VTextField-n_EGRJfe.js";import{V as v,a as D}from"./VSlider-83S_99kB.js";import{V as P,a as z}from"./VChip-DufnonQ7.js";import{b as K,V as Y}from"./forwardRefs-DD3z6Xrt.js";const Z={class:"page-root"},q={__name:"index",setup(H){const x=["IR","Red","Green","Blue","White","UV"],y=`http://${window.location.hostname}:8080`,p={IR:"#ff5252",Red:"#ff5252",Green:"#4caf50",Blue:"#2196f3",White:"#e0e0e0",UV:"#7c4dff"},B=b(()=>a.value==="White"?"#333":"#fff"),o=G({...{IR:0,Red:0,Green:0,Blue:0,White:0,UV:0}}),a=k("IR");let f=null;F(()=>{f=setInterval(async()=>{try{const s=await(await fetch(`${y}/api/state`)).json();s.lighting&&["IR","Red","Green","Blue","White","UV"].forEach((i,d)=>{o[i]=s.lighting[d]})}catch(t){console.error("Error fetching state:",t)}},1e3);const l=localStorage.getItem("lightSliderValues");l&&Object.assign(o,JSON.parse(l));const e=localStorage.getItem("selectedChip");e&&x.includes(e)&&(a.value=e)}),J(()=>{f&&clearInterval(f)}),I(o,l=>{localStorage.setItem("lightSliderValues",JSON.stringify(l))},{deep:!0}),I(a,l=>{localStorage.setItem("selectedChip",l)});function U(){return["IR","Red","Green","Blue","White","UV"].map(e=>Number(o[e])||0)}function S(){localStorage.setItem("lightSliderValues",JSON.stringify(o)),j(U(),W())}function N(l){l>100?o[a.value]=100:l<0&&(o[a.value]=0),S()}function W(){const l=["IR","Red","Green","Blue","White","UV"],e=JSON.parse(localStorage.getItem("schedules")||"[]");function t(s){if(!s)return 0;let[r,i,d]=s.split(":");return r=parseInt(r),i=parseInt(i),d==="PM"&&r!==12&&(r+=12),d==="AM"&&r===12&&(r=0),r*100+i}return{scheduleCount:e.length,schedules:e.map(s=>[!!s.enabled,t(s.start),t(s.end),...l.map(r=>s.lights&&s.lights.includes(r))])}}async function j(l,e){const s=await(await fetch(`${y}/api/state`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lighting:l,scheduleData:e})})).json();console.log("Backend response:",s)}const T=b(()=>{const l=p[a.value],e=o[a.value]/100,t=e;let s="";if(a.value==="White")s=`
        0 0 ${30+40*e}px 10px rgba(224,224,224,${t}),
        0 0 ${60+60*e}px 20px rgba(255,255,255,${t*.7})
      `;else{let r=function(c){c=c.replace("#",""),c.length===3&&(c=c.split("").map($=>$+$).join(""));const g=parseInt(c,16);return[g>>16&255,g>>8&255,g&255]};const[i,d,m]=r(l);s=`
        0 0 ${30+40*e}px 10px rgba(${i},${d},${m},${t}),
        0 0 ${60+60*e}px 20px rgba(${i},${d},${m},${t*.7}),
        0 0 ${90+80*e}px 30px rgba(${i},${d},${m},${t*.4})
      `}return{width:"100px",height:"100px",borderRadius:"50%",background:a.value==="White"?"radial-gradient(circle, #fff 60%, #e0e0e0 100%)":`radial-gradient(circle, ${l} 60%, #222 100%)`,boxShadow:s,animation:`pulse ${1.2-e*.7}s infinite alternate`,transition:"background 0.3s, box-shadow 0.3s"}});return(l,e)=>(w(),R("div",Z,[n(Y,{style:{margin:"auto"},width:"400"},{default:u(()=>[n(V,{class:"d-flex flex-column align-center pt-6 pb-2"},{default:u(()=>e[3]||(e[3]=[h("span",{class:"text-h3 font-weight-bold text-center"},"LCMR_2",-1)])),_:1}),n(v,{class:"mb-2"}),n(V,{class:"d-flex justify-center"},{default:u(()=>[n(P,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t),class:"d-flex flex-wrap justify-center",mandatory:""},{default:u(()=>[(w(),R(M,null,A(x,t=>n(z,{key:t,class:"ma-1",color:p[t],size:"small",value:t,variant:a.value===t?"elevated":"outlined"},{default:u(()=>[E(C(t),1)]),_:2},1032,["color","value","variant"])),64))]),_:1},8,["modelValue"])]),_:1}),n(v),n(V,{class:"d-flex justify-center my-4"},{default:u(()=>[h("div",{class:"d-flex align-center justify-center pulse-circle",style:_(T.value)},[h("span",{class:"text-h4 font-weight-bold",style:_({color:B.value})},C(o[a.value])+"% ",5)],4)]),_:1}),n(K,null,{default:u(()=>[n(D,{modelValue:o[a.value],"onUpdate:modelValue":[e[2]||(e[2]=t=>o[a.value]=t),S],class:"ma-4",color:p[a.value],"hide-details":"",max:100,step:1},{append:u(()=>[n(L,{modelValue:o[a.value],"onUpdate:modelValue":[e[1]||(e[1]=t=>o[a.value]=t),N],density:"compact","hide-details":"",max:100,style:{width:"80px"},suffix:"%",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1},8,["modelValue","color"])]),_:1}),n(v)]),_:1})]))}},se=O(q,[["__scopeId","data-v-15786361"]]);export{se as default};
