import{aE as tl,r as Y,n as ie,p as ae,v as al,aF as nl,F as Fe,s as ee,c as _,u as Pe,aG as il,aH as ke,R as sl,w as ce,x as t,$ as J,H as Ee,I as we,aI as ol,l as fe,a8 as X,aJ as ul,q as Ue,G as Ge,t as I,ai as te,aj as Ne,m as xe,aK as Le,aa as We,aL as rl,z as dl,B as je,C as cl,D as fl,aM as vl,E as re,aN as ml,ab as hl,ac as gl,a6 as Ve,ae as Je,af as yl,a4 as ue,a7 as pl,ag as le,ah as W,aO as Sl,ak as bl,J as Cl,aP as kl,K as Vl,L as He,M as wl,al as Be,d as Ie,j as xl,aQ as Il,aR as Ke,i as Al,a0 as ye,am as Pl,A as Bl,au as Tl,aS as zl,aT as Ml,aU as Dl,aV as Ol,aw as Rl,a as pe,o as _l,P as $l,T as Fl,ax as ne,U as Q,W as g,az as Se,aW as El,S as be,Z as U,aB as Ul,Y as P,_ as L,aC as Gl}from"./index-Bj7NxbRJ.js";import{d as Te,a as oe,b as ve,c as Ce,V as me,e as he}from"./VDialog-DYe_tuMm.js";import{g as ze,h as Nl,c as Ll,u as Wl,b as Me,a as jl,m as Jl,f as ge,e as Hl}from"./VTextField-C2QdtnPU.js";import{V as Kl}from"./VContainer-CfoMDd_w.js";const ql=tl("schedule",()=>{const e=Y([]),f=Y(!1);async function d(a){f.value=!0;try{const v=await(await fetch(`${a}/api/state`)).json();if(v.scheduleData&&Array.isArray(v.scheduleData.schedules)){const c=["IR","Red","Green","Blue","White","UV"];e.value=v.scheduleData.schedules.map(s=>({enabled:s[0],start:i(s[1]),end:i(s[2]),lights:c.filter((p,V)=>s[3+V]),title:"Untitled Schedule"}))}else e.value=[]}finally{f.value=!1}}function i(a){if(!a&&a!==0)return null;let h=Math.floor(a/100);const v=a%100;let c="AM";return h===0?h=12:h===12?c="PM":h>12&&(h-=12,c="PM"),`${String(h).padStart(2,"0")}:${String(v).padStart(2,"0")}:${c}`}return{schedules:e,loading:f,fetchSchedules:d}});function Ql(e){let{selectedElement:f,containerElement:d,isRtl:i,isHorizontal:a}=e;const h=de(a,d),v=qe(a,i,d),c=de(a,f),s=Qe(a,f),p=c*.4;return v>s?s-p:v+h<s+c?s-h+c+p:v}function Yl(e){let{selectedElement:f,containerElement:d,isHorizontal:i}=e;const a=de(i,d),h=Qe(i,f),v=de(i,f);return h-a/2+v/2}function De(e,f){const d=e?"scrollWidth":"scrollHeight";return(f==null?void 0:f[d])||0}function Xl(e,f){const d=e?"clientWidth":"clientHeight";return(f==null?void 0:f[d])||0}function qe(e,f,d){if(!d)return 0;const{scrollLeft:i,offsetWidth:a,scrollWidth:h}=d;return e?f?h-a+i:i:d.scrollTop}function de(e,f){const d=e?"offsetWidth":"offsetHeight";return(f==null?void 0:f[d])||0}function Qe(e,f){const d=e?"offsetLeft":"offsetTop";return(f==null?void 0:f[d])||0}const Zl=Symbol.for("vuetify:v-slide-group"),Ye=ae({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Zl},nextIcon:{type:X,default:"$next"},prevIcon:{type:X,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...fe(),...ol({mobile:null}),...we(),...Ee({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Oe=ie()({name:"VSlideGroup",props:Ye(),emits:{"update:modelValue":e=>!0},setup(e,f){let{slots:d}=f;const{isRtl:i}=al(),{displayClasses:a,mobile:h}=nl(e),v=Fe(e,e.symbol),c=ee(!1),s=ee(0),p=ee(0),V=ee(0),b=_(()=>e.direction==="horizontal"),{resizeRef:w,contentRect:m}=Pe(),{resizeRef:y,contentRect:T}=Pe(),A=il(),D=_(()=>({container:w.el,duration:200,easing:"easeOutQuart"})),$=_(()=>v.selected.value.length?v.items.value.findIndex(r=>r.id===v.selected.value[0]):-1),G=_(()=>v.selected.value.length?v.items.value.findIndex(r=>r.id===v.selected.value[v.selected.value.length-1]):-1);if(ke){let r=-1;sl(()=>[v.selected.value,m.value,T.value,b.value],()=>{cancelAnimationFrame(r),r=requestAnimationFrame(()=>{if(m.value&&T.value){const u=b.value?"width":"height";p.value=m.value[u],V.value=T.value[u],c.value=p.value+1<V.value}if($.value>=0&&y.el){const u=y.el.children[G.value];R(u,e.centerActive)}})})}const F=ee(!1);function R(r,u){let C=0;u?C=Yl({containerElement:w.el,isHorizontal:b.value,selectedElement:r}):C=Ql({containerElement:w.el,isHorizontal:b.value,isRtl:i.value,selectedElement:r}),H(C)}function H(r){if(!ke||!w.el)return;const u=de(b.value,w.el),C=qe(b.value,i.value,w.el);if(!(De(b.value,w.el)<=u||Math.abs(r-C)<16)){if(b.value&&i.value&&w.el){const{scrollWidth:j,offsetWidth:Z}=w.el;r=j-Z-r}b.value?A.horizontal(r,D.value):A(r,D.value)}}function k(r){const{scrollTop:u,scrollLeft:C}=r.target;s.value=b.value?C:u}function E(r){if(F.value=!0,!(!c.value||!y.el)){for(const u of r.composedPath())for(const C of y.el.children)if(C===u){R(C);return}}}function K(r){F.value=!1}let N=!1;function z(r){var u;!N&&!F.value&&!(r.relatedTarget&&((u=y.el)!=null&&u.contains(r.relatedTarget)))&&o(),N=!1}function O(){N=!0}function q(r){if(!y.el)return;function u(C){r.preventDefault(),o(C)}b.value?r.key==="ArrowRight"?u(i.value?"prev":"next"):r.key==="ArrowLeft"&&u(i.value?"next":"prev"):r.key==="ArrowDown"?u("next"):r.key==="ArrowUp"&&u("prev"),r.key==="Home"?u("first"):r.key==="End"&&u("last")}function M(r,u){if(!r)return;let C=r;do C=C==null?void 0:C[u==="next"?"nextElementSibling":"previousElementSibling"];while(C!=null&&C.hasAttribute("disabled"));return C}function o(r){if(!y.el)return;let u;if(!r)u=ul(y.el)[0];else if(r==="next"){if(u=M(y.el.querySelector(":focus"),r),!u)return o("first")}else if(r==="prev"){if(u=M(y.el.querySelector(":focus"),r),!u)return o("last")}else r==="first"?(u=y.el.firstElementChild,u!=null&&u.hasAttribute("disabled")&&(u=M(u,"next"))):r==="last"&&(u=y.el.lastElementChild,u!=null&&u.hasAttribute("disabled")&&(u=M(u,"prev")));u&&u.focus({preventScroll:!0})}function l(r){const u=b.value&&i.value?-1:1,C=(r==="prev"?-u:u)*p.value;let se=s.value+C;if(b.value&&i.value&&w.el){const{scrollWidth:j,offsetWidth:Z}=w.el;se+=j-Z}H(se)}const S=_(()=>({next:v.next,prev:v.prev,select:v.select,isSelected:v.isSelected})),n=_(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!h.value;case!0:return c.value||Math.abs(s.value)>0;case"mobile":return h.value||c.value||Math.abs(s.value)>0;default:return!h.value&&(c.value||Math.abs(s.value)>0)}}),x=_(()=>Math.abs(s.value)>1),B=_(()=>{if(!w.value)return!1;const r=De(b.value,w.el),u=Xl(b.value,w.el);return r-u-Math.abs(s.value)>1});return ce(()=>t(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!b.value,"v-slide-group--has-affixes":n.value,"v-slide-group--is-overflowing":c.value},a.value,e.class],style:e.style,tabindex:F.value||v.selected.value.length?-1:0,onFocus:z},{default:()=>{var r,u,C;return[n.value&&t("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!x.value}],onMousedown:O,onClick:()=>x.value&&l("prev")},[((r=d.prev)==null?void 0:r.call(d,S.value))??t(ze,null,{default:()=>[t(J,{icon:i.value?e.nextIcon:e.prevIcon},null)]})]),t("div",{key:"container",ref:w,class:"v-slide-group__container",onScroll:k},[t("div",{ref:y,class:"v-slide-group__content",onFocusin:E,onFocusout:K,onKeydown:q},[(u=d.default)==null?void 0:u.call(d,S.value)])]),n.value&&t("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!B.value}],onMousedown:O,onClick:()=>B.value&&l("next")},[((C=d.next)==null?void 0:C.call(d,S.value))??t(ze,null,{default:()=>[t(J,{icon:i.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:v.selected,scrollTo:l,scrollOffset:s,focus:o,hasPrev:x,hasNext:B}}}),Xe=Symbol.for("vuetify:v-chip-group"),et=ae({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Le},...Ye(),...fe(),...Ee({selectedClass:"v-chip--selected"}),...we(),...xe(),...Ne({variant:"tonal"})},"VChipGroup"),Re=ie()({name:"VChipGroup",props:et(),emits:{"update:modelValue":e=>!0},setup(e,f){let{slots:d}=f;const{themeClasses:i}=Ue(e),{isSelected:a,select:h,next:v,prev:c,selected:s}=Fe(e,Xe);return Ge({VChip:{baseColor:I(()=>e.baseColor),color:I(()=>e.color),disabled:I(()=>e.disabled),filter:I(()=>e.filter),variant:I(()=>e.variant)}}),ce(()=>{const p=Oe.filterProps(e);return t(Oe,te(p,{class:["v-chip-group",{"v-chip-group--column":e.column},i.value,e.class],style:e.style}),{default:()=>{var V;return[(V=d.default)==null?void 0:V.call(d,{isSelected:a,select:h,next:v,prev:c,selected:s.value})]}})}),{}}}),lt=ae({activeClass:String,appendAvatar:String,appendIcon:X,baseColor:String,closable:Boolean,closeIcon:{type:X,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:X,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:X,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Be(),onClickOnce:Be(),...wl(),...fe(),...He(),...Vl(),...kl(),...Cl(),...bl(),...Sl(),...we({tag:"span"}),...xe(),...Ne({variant:"tonal"})},"VChip"),_e=ie()({name:"VChip",directives:{Ripple:We},props:lt(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,f){let{attrs:d,emit:i,slots:a}=f;const{t:h}=rl(),{borderClasses:v}=dl(e),{densityClasses:c}=je(e),{elevationClasses:s}=cl(e),{roundedClasses:p}=fl(e),{sizeClasses:V}=vl(e),{themeClasses:b}=Ue(e),w=re(e,"modelValue"),m=ml(e,Xe,!1),y=hl(e,d),T=I(()=>e.link!==!1&&y.isLink.value),A=_(()=>!e.disabled&&e.link!==!1&&(!!m||e.link||y.isClickable.value)),D=I(()=>({"aria-label":h(e.closeLabel),onClick(k){k.preventDefault(),k.stopPropagation(),w.value=!1,i("click:close",k)}})),{colorClasses:$,colorStyles:G,variantClasses:F}=gl(()=>({color:!m||m.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function R(k){var E;i("click",k),A.value&&((E=y.navigate)==null||E.call(y,k),m==null||m.toggle())}function H(k){(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),R(k))}return()=>{var M;const k=y.isLink.value?"a":e.tag,E=!!(e.appendIcon||e.appendAvatar),K=!!(E||a.append),N=!!(a.close||e.closable),z=!!(a.filter||e.filter)&&m,O=!!(e.prependIcon||e.prependAvatar),q=!!(O||a.prepend);return w.value&&Ve(t(k,te({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":A.value,"v-chip--filter":z,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&((M=y.isActive)==null?void 0:M.value)},b.value,v.value,$.value,c.value,s.value,p.value,V.value,F.value,m==null?void 0:m.selectedClass.value,e.class],style:[G.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:A.value?0:void 0,onClick:R,onKeydown:A.value&&!T.value&&H},y.linkProps),{default:()=>{var o;return[yl(A.value,"v-chip"),z&&t(Nl,{key:"filter"},{default:()=>[Ve(t("div",{class:"v-chip__filter"},[a.filter?t(ue,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},a.filter):t(J,{key:"filter-icon",icon:e.filterIcon},null)]),[[pl,m.isSelected.value]])]}),q&&t("div",{key:"prepend",class:"v-chip__prepend"},[a.prepend?t(ue,{key:"prepend-defaults",disabled:!O,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},a.prepend):t(le,null,[e.prependIcon&&t(J,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&t(Te,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),t("div",{class:"v-chip__content","data-no-activator":""},[((o=a.default)==null?void 0:o.call(a,{isSelected:m==null?void 0:m.isSelected.value,selectedClass:m==null?void 0:m.selectedClass.value,select:m==null?void 0:m.select,toggle:m==null?void 0:m.toggle,value:m==null?void 0:m.value.value,disabled:e.disabled}))??W(e.text)]),K&&t("div",{key:"append",class:"v-chip__append"},[a.append?t(ue,{key:"append-defaults",disabled:!E,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},a.append):t(le,null,[e.appendIcon&&t(J,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&t(Te,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),N&&t("button",te({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},D.value),[a.close?t(ue,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},a.close):t(J,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Je("ripple"),A.value&&e.ripple,null]])}}}),Ze=Symbol.for("vuetify:selection-control-group"),el=ae({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:X,trueIcon:X,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Le},...fe(),...He(),...xe()},"SelectionControlGroup"),tt=ae({...el({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");ie()({name:"VSelectionControlGroup",props:tt(),emits:{"update:modelValue":e=>!0},setup(e,f){let{slots:d}=f;const i=re(e,"modelValue"),a=Ie(),h=I(()=>e.id||`v-selection-control-group-${a}`),v=I(()=>e.name||h.value),c=new Set;return xl(Ze,{modelValue:i,forceUpdate:()=>{c.forEach(s=>s())},onForceUpdate:s=>{c.add(s),Il(()=>{c.delete(s)})}}),Ge({[e.defaultsTarget]:{color:I(()=>e.color),disabled:I(()=>e.disabled),density:I(()=>e.density),error:I(()=>e.error),inline:I(()=>e.inline),modelValue:i,multiple:I(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),name:v,falseIcon:I(()=>e.falseIcon),trueIcon:I(()=>e.trueIcon),readonly:I(()=>e.readonly),ripple:I(()=>e.ripple),type:I(()=>e.type),valueComparator:I(()=>e.valueComparator)}}),ce(()=>{var s;return t("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(s=d.default)==null?void 0:s.call(d)])}),{}}});const ll=ae({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...fe(),...el()},"VSelectionControl");function at(e){const f=Al(Ze,void 0),{densityClasses:d}=je(e),i=re(e,"modelValue"),a=_(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),h=_(()=>e.falseValue!==void 0?e.falseValue:!1),v=_(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),c=_({get(){const m=f?f.modelValue.value:i.value;return v.value?ye(m).some(y=>e.valueComparator(y,a.value)):e.valueComparator(m,a.value)},set(m){if(e.readonly)return;const y=m?a.value:h.value;let T=y;v.value&&(T=m?[...ye(i.value),y]:ye(i.value).filter(A=>!e.valueComparator(A,a.value))),f?f.modelValue.value=T:i.value=T}}),{textColorClasses:s,textColorStyles:p}=Pl(()=>{if(!(e.error||e.disabled))return c.value?e.color:e.baseColor}),{backgroundColorClasses:V,backgroundColorStyles:b}=Bl(()=>c.value&&!e.error&&!e.disabled?e.color:e.baseColor),w=_(()=>c.value?e.trueIcon:e.falseIcon);return{group:f,densityClasses:d,trueValue:a,falseValue:h,model:c,textColorClasses:s,textColorStyles:p,backgroundColorClasses:V,backgroundColorStyles:b,icon:w}}const $e=ie()({name:"VSelectionControl",directives:{Ripple:We},inheritAttrs:!1,props:ll(),emits:{"update:modelValue":e=>!0},setup(e,f){let{attrs:d,slots:i}=f;const{group:a,densityClasses:h,icon:v,model:c,textColorClasses:s,textColorStyles:p,backgroundColorClasses:V,backgroundColorStyles:b,trueValue:w}=at(e),m=Ie(),y=ee(!1),T=ee(!1),A=Y(),D=I(()=>e.id||`input-${m}`),$=I(()=>!e.disabled&&!e.readonly);a==null||a.onForceUpdate(()=>{A.value&&(A.value.checked=c.value)});function G(k){$.value&&(y.value=!0,zl(k.target,":focus-visible")!==!1&&(T.value=!0))}function F(){y.value=!1,T.value=!1}function R(k){k.stopPropagation()}function H(k){if(!$.value){A.value&&(A.value.checked=c.value);return}e.readonly&&a&&Tl(()=>a.forceUpdate()),c.value=k.target.checked}return ce(()=>{var z,O;const k=i.label?i.label({label:e.label,props:{for:D.value}}):e.label,[E,K]=Ke(d),N=t("input",te({ref:A,checked:c.value,disabled:!!e.disabled,id:D.value,onBlur:F,onFocus:G,onInput:H,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:w.value,name:e.name,"aria-checked":e.type==="checkbox"?c.value:void 0},K),null);return t("div",te({class:["v-selection-control",{"v-selection-control--dirty":c.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":y.value,"v-selection-control--focus-visible":T.value,"v-selection-control--inline":e.inline},h.value,e.class]},E,{style:e.style}),[t("div",{class:["v-selection-control__wrapper",s.value],style:p.value},[(z=i.default)==null?void 0:z.call(i,{backgroundColorClasses:V,backgroundColorStyles:b}),Ve(t("div",{class:["v-selection-control__input"]},[((O=i.input)==null?void 0:O.call(i,{model:c,textColorClasses:s,textColorStyles:p,backgroundColorClasses:V,backgroundColorStyles:b,inputNode:N,icon:v.value,props:{onFocus:G,onBlur:F,id:D.value}}))??t(le,null,[v.value&&t(J,{key:"icon",icon:v.value},null),N])]),[[Je("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),k&&t(Ll,{for:D.value,onClick:R},{default:()=>[k]})])}),{isFocused:y,input:A}}}),nt=ae({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Jl(),...ll()},"VSwitch"),it=ie()({name:"VSwitch",inheritAttrs:!1,props:nt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,f){let{attrs:d,slots:i}=f;const a=re(e,"indeterminate"),h=re(e,"modelValue"),{loaderClasses:v}=Ml(e),{isFocused:c,focus:s,blur:p}=Wl(e),V=Y(),b=ke&&window.matchMedia("(forced-colors: active)").matches,w=I(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),m=Ie(),y=I(()=>e.id||`switch-${m}`);function T(){a.value&&(a.value=!1)}function A(D){var $,G;D.stopPropagation(),D.preventDefault(),(G=($=V.value)==null?void 0:$.input)==null||G.click()}return ce(()=>{const[D,$]=Ke(d),G=Me.filterProps(e),F=$e.filterProps(e);return t(Me,te({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":a.value},v.value,e.class]},D,G,{modelValue:h.value,"onUpdate:modelValue":R=>h.value=R,id:y.value,focused:c.value,style:e.style}),{...i,default:R=>{let{id:H,messagesId:k,isDisabled:E,isReadonly:K,isValid:N}=R;const z={model:h,isValid:N};return t($e,te({ref:V},F,{modelValue:h.value,"onUpdate:modelValue":[O=>h.value=O,T],id:H.value,"aria-describedby":k.value,type:"checkbox","aria-checked":a.value?"mixed":void 0,disabled:E.value,readonly:K.value,onFocus:s,onBlur:p},$),{...i,default:O=>{let{backgroundColorClasses:q,backgroundColorStyles:M}=O;return t("div",{class:["v-switch__track",b?void 0:q.value],style:M.value,onClick:A},[i["track-true"]&&t("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](z)]),i["track-false"]&&t("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](z)])])},input:O=>{let{inputNode:q,icon:M,backgroundColorClasses:o,backgroundColorStyles:l}=O;return t(le,null,[q,t("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":M||e.loading},e.inset||b?void 0:o.value],style:e.inset?void 0:l.value},[i.thumb?t(ue,{defaults:{VIcon:{icon:M,size:"x-small"}}},{default:()=>[i.thumb({...z,icon:M})]}):t(jl,null,{default:()=>[e.loading?t(Dl,{name:"v-switch",active:!0,color:N.value===!1?void 0:w.value},{default:S=>i.loader?i.loader(S):t(Ol,{active:S.isActive,color:S.color,indeterminate:!0,size:"16",width:"2"},null)}):M&&t(J,{key:String(M),icon:M,size:"x-small"},null)]})])])}})}})}),{}}}),st={class:"page-root"},ot={key:0,class:"w-100 d-flex flex-column align-center"},ut={class:"mb-2"},rt={key:1,class:"d-flex flex-column align-center justify-center"},dt={class:"mb-2 d-flex flex-column align-center"},ct={class:"d-flex align-center mb-2",style:{gap:"12px"}},ft={class:"d-flex align-center mb-2",style:{gap:"12px"}},vt={__name:"timer",setup(e){const f=["IR","Red","Green","Blue","White","UV"],d=`http://${window.location.hostname}:8080`,i=ql(),a=Y([]),h=Y(!1),v=Y(!1),c=Y(null),s=pe({id:null,title:"Untitled Schedule",start:null,end:null,lights:[],enabled:!0}),p=pe({visible:!1,type:"start",time:null,ampm:"AM"}),V=pe({visible:!1,chip:"",conflictTitle:"",overlap:""});let b=null;async function w(){const l=await(await fetch(`${d}/api/state`)).json();if(l.scheduleData&&Array.isArray(l.scheduleData.schedules)){const S=["IR","Red","Green","Blue","White","UV"];a.value=l.scheduleData.schedules.map(n=>({enabled:n[0],start:m(n[1]),end:m(n[2]),lights:S.filter((x,B)=>n[3+B]),title:"Untitled Schedule"}))}else a.value=[]}_l(()=>{i.schedules.length===0&&i.fetchSchedules(d),b=setInterval(async()=>{try{i.fetchSchedules(d);const l=await(await fetch(`${d}/api/state`)).json();if(l.scheduleData&&Array.isArray(l.scheduleData.schedules)){const S=JSON.stringify(l.scheduleData.schedules),n=JSON.stringify(y(a.value));if(S!==n){const x=["IR","Red","Green","Blue","White","UV"];a.value=l.scheduleData.schedules.map(B=>({enabled:B[0],start:m(B[1]),end:m(B[2]),lights:x.filter((r,u)=>B[3+u]),title:"Untitled Schedule"}))}}}catch(o){console.error("Error fetching schedule state:",o)}},1e3),w()}),$l(()=>{b&&clearInterval(b)});function m(o){if(!o&&o!==0)return null;let l=Math.floor(o/100);const S=o%100;let n="AM";return l===0?l=12:l===12?n="PM":l>12&&(l-=12,n="PM"),`${String(l).padStart(2,"0")}:${String(S).padStart(2,"0")}:${n}`}function y(o){const l=["IR","Red","Green","Blue","White","UV"];function S(n){if(!n)return 0;let[x,B,r]=n.split(":");return x=parseInt(x),B=parseInt(B),r==="PM"&&x!==12&&(x+=12),r==="AM"&&x===12&&(x=0),x*100+B}return o.map(n=>[!!n.enabled,S(n.start),S(n.end),...l.map(x=>n.lights&&n.lights.includes(x))])}function T(){const o=["IR","Red","Green","Blue","White","UV"],l=JSON.parse(localStorage.getItem("lightSliderValues")||"{}");return o.map(S=>Number(l[S])||0)}async function A(o,l){const n=await(await fetch(`${d}/api/state`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lighting:o,scheduleData:l})})).json();console.log("Backend response:",n)}function D(){localStorage.setItem("schedules",JSON.stringify(a.value)),A(T(),{scheduleCount:a.value.length,schedules:y(a.value)})}function $(){h.value=!0}function G(){h.value=!1,F()}function F(o=null){v.value=!0,c.value=o,o===null?Object.assign(s,{id:Date.now(),title:"Untitled Schedule",start:null,end:null,lights:[],enabled:!0}):Object.assign(s,JSON.parse(JSON.stringify(a.value[o])))}function R(){v.value=!1,c.value=null}function H(o){F(o)}async function k(o){a.value.splice(o,1),R(),await A(T(),{scheduleCount:a.value.length,schedules:y(a.value)}),await w()}function E(o){p.type=o,p.visible=!0;const l=s[o];if(l){const[S,n,x]=l.split(":");p.time=`${S.padStart(2,"0")}:${n.padStart(2,"0")}`,p.ampm=x}else p.time="12:00",p.ampm="AM"}function K(){p.ampm=p.ampm==="AM"?"PM":"AM"}function N(){let[o,l]=p.time.split(":").map(Number);const S=p.ampm;S==="AM"?(o===0&&(o=12),o>12&&(o-=12)):(o===0&&(o=12),o<12&&(o+=12),o>12&&(o-=12)),s[p.type]=`${String(o).padStart(2,"0")}:${String(l).padStart(2,"0")}:${S}`,p.visible=!1}function z(o){if(!o)return"--:--";const[l,S,n]=o.split(":");return`${l.padStart(2,"0")}:${S.padStart(2,"0")} ${n}`}const O=_(()=>s.title&&s.start&&s.end&&s.lights.length>0);function q(){for(let o=0;o<a.value.length;o++){if(c.value!==null&&o===c.value)continue;const l=a.value[o];for(const S of s.lights)if(l.lights.includes(S)&&M(s.start,s.end,l.start,l.end)){V.chip=S,V.conflictTitle=l.title,V.overlap=`${z(l.start)} - ${z(l.end)}`,V.visible=!0;return}}c.value===null?a.value.push(JSON.parse(JSON.stringify(s))):a.value[c.value]=JSON.parse(JSON.stringify(s)),R(),A(T(),{scheduleCount:a.value.length,schedules:y(a.value)})}function M(o,l,S,n){const x=se=>{let[j,Z,Ae]=se.split(":");return j=parseInt(j),Z=parseInt(Z),Ae==="PM"&&j!==12&&(j+=12),Ae==="AM"&&j===12&&(j=0),j*60+Z},B=x(o),r=x(l),u=x(S),C=x(n);return Math.max(B,u)<Math.min(r,C)}return(o,l)=>{const S=Fl("v-time-picker");return Q(),ne("div",st,[t(Kl,{class:"fill-height d-flex flex-column align-center justify-center"},{default:g(()=>[a.value.length>0?(Q(),ne("div",ot,[(Q(!0),ne(le,null,Se(El(i).schedules,(n,x)=>(Q(),be(oe,{key:n.id,class:"mb-4",elevation:"4",style:{cursor:"pointer",position:"relative"},width:"400",onClick:B=>H(x)},{default:g(()=>[t(ve,{class:"d-flex justify-space-between align-center"},{default:g(()=>[U("span",null,W(n.title),1),t(it,{modelValue:n.enabled,"onUpdate:modelValue":B=>n.enabled=B,color:n.enabled?"success":"error","hide-details":"",onChange:D,onClick:l[0]||(l[0]=Ul(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),t(Ce,null,{default:g(()=>[U("div",ut,[l[14]||(l[14]=U("strong",null,"Start:",-1)),P(" "+W(z(n.start)),1),l[15]||(l[15]=U("br",null,null,-1)),l[16]||(l[16]=U("strong",null,"End:",-1)),P(" "+W(z(n.end)),1)]),t(Re,{column:"",multiple:""},{default:g(()=>[(Q(!0),ne(le,null,Se(n.lights,B=>(Q(),be(_e,{key:B,class:"ma-1",color:"primary"},{default:g(()=>[P(W(B),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),t(L,{class:"my-8",color:"primary",size:"x-large",style:{"border-radius":"50%",width:"80px","aspect-ratio":"1/1"},variant:"tonal",onClick:$},{default:g(()=>[t(J,{size:"48"},{default:g(()=>l[17]||(l[17]=[P("mdi-plus")])),_:1})]),_:1})])):(Q(),ne("div",rt,[t(L,{color:"primary",size:"x-large",style:{"border-radius":"50%",width:"120px","aspect-ratio":"1/1","min-width":"0","min-height":"0",height:"auto"},variant:"tonal",onClick:$},{default:g(()=>[t(J,{size:"64"},{default:g(()=>l[18]||(l[18]=[P("mdi-plus")])),_:1})]),_:1})])),t(me,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=n=>h.value=n),"max-width":"400",persistent:""},{default:g(()=>[t(oe,null,{default:g(()=>[t(ve,null,{default:g(()=>l[19]||(l[19]=[P("Create Schedule?")])),_:1}),t(he,null,{default:g(()=>[t(ge),t(L,{color:"primary",onClick:G},{default:g(()=>l[20]||(l[20]=[P("Yes")])),_:1}),t(L,{onClick:l[1]||(l[1]=n=>h.value=!1)},{default:g(()=>l[21]||(l[21]=[P("Cancel")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(me,{modelValue:v.value,"onUpdate:modelValue":l[8]||(l[8]=n=>v.value=n),"max-width":"400",persistent:""},{default:g(()=>[t(oe,null,{default:g(()=>[t(ve,null,{default:g(()=>[t(Hl,{modelValue:s.title,"onUpdate:modelValue":l[3]||(l[3]=n=>s.title=n),"hide-details":"",label:"Title",style:{"font-size":"1.2em"},variant:"plain"},null,8,["modelValue"])]),_:1}),t(Ce,null,{default:g(()=>[U("div",dt,[U("div",ct,[l[22]||(l[22]=U("span",null,"Start:",-1)),t(L,{color:"success",style:{"min-width":"80px"},variant:"outlined",onClick:l[4]||(l[4]=n=>E("start"))},{default:g(()=>[P(W(s.start?z(s.start):"Set Time"),1)]),_:1})]),U("div",ft,[l[23]||(l[23]=U("span",null,"End:",-1)),t(L,{color:"error",style:{"min-width":"80px"},variant:"outlined",onClick:l[5]||(l[5]=n=>E("end"))},{default:g(()=>[P(W(s.end?z(s.end):"Set Time"),1)]),_:1})]),t(Re,{modelValue:s.lights,"onUpdate:modelValue":l[6]||(l[6]=n=>s.lights=n),class:"mb-2 d-flex flex-wrap justify-center",column:"",multiple:""},{default:g(()=>[(Q(),ne(le,null,Se(f,n=>t(_e,{key:n,class:"ma-1",color:"primary",size:"small",value:n,variant:s.lights.includes(n)?"elevated":"outlined"},{default:g(()=>[P(W(n),1)]),_:2},1032,["value","variant"])),64))]),_:1},8,["modelValue"])])]),_:1}),t(he,null,{default:g(()=>[c.value!==null?(Q(),be(L,{key:0,class:"mr-auto",color:"error",variant:"tonal",onClick:l[7]||(l[7]=n=>k(c.value))},{default:g(()=>[t(J,{start:""},{default:g(()=>l[24]||(l[24]=[P("mdi-delete")])),_:1}),l[25]||(l[25]=P(" Delete "))]),_:1})):Gl("",!0),t(ge),t(L,{color:"primary",disabled:!O.value,onClick:q},{default:g(()=>l[26]||(l[26]=[P("Save")])),_:1},8,["disabled"]),t(L,{onClick:R},{default:g(()=>l[27]||(l[27]=[P("Cancel")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(me,{modelValue:p.visible,"onUpdate:modelValue":l[11]||(l[11]=n=>p.visible=n),"max-width":"320",persistent:""},{default:g(()=>[t(oe,null,{default:g(()=>[t(S,{modelValue:p.time,"onUpdate:modelValue":l[9]||(l[9]=n=>p.time=n),color:p.type==="start"?"success":"error",format:"ampm","full-width":""},null,8,["modelValue","color"]),t(he,null,{default:g(()=>[t(L,{class:"px-4",rounded:"lg",variant:"outlined",onClick:K},{default:g(()=>[P(W(p.ampm),1)]),_:1}),t(ge),t(L,{color:"primary",onClick:N},{default:g(()=>l[28]||(l[28]=[P("OK")])),_:1}),t(L,{onClick:l[10]||(l[10]=n=>p.visible=!1)},{default:g(()=>l[29]||(l[29]=[P("Cancel")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(me,{modelValue:V.visible,"onUpdate:modelValue":l[13]||(l[13]=n=>V.visible=n),"max-width":"400",persistent:""},{default:g(()=>[t(oe,null,{default:g(()=>[t(ve,null,{default:g(()=>l[30]||(l[30]=[P("Schedule Conflict")])),_:1}),t(Ce,null,{default:g(()=>[U("div",null,[l[31]||(l[31]=P(" This schedule with ")),U("strong",null,W(V.chip),1),l[32]||(l[32]=P(" overlaps with ")),U("strong",null,W(V.conflictTitle),1),l[33]||(l[33]=P("!")),l[34]||(l[34]=U("br",null,null,-1)),P(" Overlapping time: "+W(V.overlap),1)])]),_:1}),t(he,null,{default:g(()=>[t(ge),t(L,{color:"primary",onClick:l[12]||(l[12]=n=>V.visible=!1)},{default:g(()=>l[35]||(l[35]=[P("OK")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}},pt=Rl(vt,[["__scopeId","data-v-634feae4"]]);export{pt as default};
